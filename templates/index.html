<!doctype html>
<html data-theme="light" lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/styles/styles.css">
    <title>SchoolMap</title>

    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#3b82f6">
</head>
<body>
<div class="container">
    <div class="floor-buttons">
        <input type="radio" name="floor" id="thirdFloorBtn" value="3">
        <label for="thirdFloorBtn">3</label>

        <input type="radio" name="floor" id="secondFloorBtn" value="2">
        <label for="secondFloorBtn">2</label>

        <input type="radio" name="floor" id="firstFloorBtn" value="1" checked>
        <label for="firstFloorBtn">1</label>
    </div>

    <div class="search-wrapper">
        <input type="text" placeholder="Поиск объекта" id="searchInput">
    </div>

    <div class="map-container">
        <svg id="schoolMap" viewBox="0 0 800 1200" xmlns="http://www.w3.org/2000/svg">
            <g id="floor-1" class="floor-layer">
                <!-- Коридоры -->
                <rect class="corridor" x="0" y="0" width="220" height="830"></rect>
                <rect class="corridor" x="640" y="0" width="220" height="745"></rect>
                <rect class="corridor" x="219" y="0" width="422" height="190"></rect>
                <rect class="corridor" x="580" y="320" width="50" height="150" transform="rotate(-30 620 320)"></rect>

                <!-- Двери -->
                <rect class="door" x="140" y="119" width="10" height="30"></rect>
                <rect class="door" x="140" y="151" width="10" height="29"></rect>

                <rect class="door" x="730" y="180" width="29" height="10"></rect>
                <rect class="door" x="761" y="180" width="29" height="10"></rect>

                <rect class="door" x="730" y="320" width="29" height="10"></rect>
                <rect class="door" x="761" y="320" width="29" height="10"></rect>

                <rect class="door" x="615" y="390" width="40" height="10" transform="rotate(240 615 390)"></rect>
                <rect class="door" x="626" y="390" width="30" height="10" transform="rotate(60 626 390)"></rect>

                <!-- Стены левой части (Столовая) -->
                <rect class="wall" x="0" y="0" width="80" height="830"></rect>
                <rect class="wall" x="79" y="0" width="62" height="30"></rect>
                <rect class="wall" x="140" y="189" width="80" height="117"></rect>
                <rect class="wall" x="210" y="305" width="10" height="50"></rect>
                <rect class="wall" x="140" y="354" width="80" height="476"></rect>
                <rect class="wall" x="0" y="705.5" width="360" height="125"></rect>

                <!-- Стены верхней части -->
                <rect class="wall" x="140" y="0" width="720" height="120"></rect>
                <rect class="wall" x="140" y="180" width="590" height="10"></rect>
                <rect class="wall" x="830" y="79" width="30" height="102"></rect>

                <!-- Стены правой части (КПП, Гардероб, Диваны) -->
                <rect class="wall" x="640" y="189" width="90" height="16"></rect>
                <rect class="wall" x="640" y="204" width="10" height="32"></rect>
                <rect class="wall" x="640" y="235" width="90" height="85"></rect>
                <rect class="wall" x="640" y="319" width="20" height="11"></rect>
                <rect class="wall" x="680" y="319" width="50" height="11"></rect>
                <rect class="wall" x="515" y="350" width="121" height="40" rx="20" ry="20" transform="rotate(-30 520 290)"></rect>
                <rect class="wall" x="790" y="180" width="70" height="650"></rect>
                <rect class="wall" x="599" y="650" width="192" height="95"></rect>
                <rect class="wall" x="510" y="650" width="91" height="180"></rect>
                <rect class="wall" x="760" y="744" width="31" height="61"></rect>

                <!-- Стены гардероба -->
                <circle class="wall" r="40" cx="630" cy="455"></circle>
                <rect class="wall" x="630" y="415" width="40" height="65"></rect>
                <rect class="wall" x="590" y="455" width="10" height="250"></rect>
                <rect class="wall" x="660" y="515" width="10" height="190"></rect>

                <!-- Объекты 1-ого этажа -->
                <rect id="canteen" class="room" x="150" y="250" width="60" height="240"></rect>
                <text x="180" y="370" font-size="11" transform="rotate(-90 180 370)">Столовая</text>

                <rect id="toilet-male-1" class="room" x="650" y="190" width="70" height="60"></rect>
                <text x="685" y="220" font-size="11">Туалет</text>

                <rect id="entrance" class="room" x="650" y="260" width="70" height="60"></rect>
                <text x="685" y="290" font-size="11">КПП</text>

                <rect id="sofas" class="room" x="670" y="590" width="60" height="60"></rect>
                <text x="700" y="620" font-size="11">Диваны</text>

                <rect id="wardrobe" class="room" x="600" y="460" width="60" height="190"></rect>
                <text x="630" y="555" font-size="11" transform="rotate(-90 630 555)">Гардероб</text>
            </g>

            <g id="floor-2" class="floor-layer" style="display: none;">
                <!-- Коридоры -->
                <rect class="corridor" x="0" y="0" width="220" height="720"></rect>
                <rect class="corridor" x="640" y="0" width="220" height="720"></rect>
                <rect class="corridor" x="219" y="0" width="422" height="190"></rect>
                <rect class="corridor" x="219" y="640" width="422" height="80"></rect>

                <!-- Двери -->
                <rect class="door" x="140" y="119" width="10" height="30"></rect>
                <rect class="door" x="140" y="151" width="10" height="29"></rect>

                <rect class="door" x="720" y="180" width="29" height="10"></rect>
                <rect class="door" x="751" y="180" width="29" height="10"></rect>

                <rect class="door" x="710" y="650" width="10" height="29"></rect>
                <rect class="door" x="710" y="681" width="10" height="30"></rect>

                <rect class="door" x="80" y="640" width="29" height="10"></rect>
                <rect class="door" x="111" y="640" width="29" height="10"></rect>

                <!-- Стены левой части (205, 206) -->
                <rect class="wall" x="0" y="0" width="80" height="170"></rect>
                <rect class="wall" x="0" y="169" width="10" height="62"></rect>
                <rect class="wall" x="70" y="169" width="10" height="10"></rect>
                <rect class="wall" x="70" y="195" width="10" height="36"></rect>
                <rect class="wall" x="0" y="230" width="80" height="10"></rect>
                <rect class="wall" x="0" y="239" width="10" height="102"></rect>
                <rect class="wall" x="70" y="239" width="10" height="11"></rect>
                <rect class="wall" x="70" y="265" width="10" height="76"></rect>
                <rect class="wall" x="0" y="265" width="80" height="385"></rect>

                <!-- Стены левой части (ЖТ) -->
                <rect class="wall" x="79" y="0" width="62" height="30"></rect>
                <rect class="wall" x="140" y="180" width="80" height="360"></rect>
                <rect class="wall" x="210" y="539" width="10" height="52"></rect>
                <rect class="wall" x="140" y="539" width="10" height="19"></rect>
                <rect class="wall" x="140" y="572" width="10" height="19"></rect>
                <rect class="wall" x="140" y="590" width="80" height="60"></rect>

                <!-- Стены верхней части -->
                <rect class="wall" x="140" y="0" width="720" height="120"></rect>
                <rect class="wall" x="219" y="180" width="422" height="10"></rect>
                <rect class="wall" x="830" y="119" width="30" height="62"></rect>

                <!-- Стены правой части (226) -->
                <rect class="wall" x="515" y="350" width="121" height="40" rx="20" ry="20" transform="rotate(-30 520 290)"></rect>
                <rect class="wall" x="580" y="330" width="61" height="120"></rect>
                <rect class="wall" x="580" y="449" width="10" height="192"></rect>
                <rect class="wall" x="640" y="180" width="80" height="470"></rect>
                <rect class="wall" x="780" y="180" width="80" height="650"></rect>
                <rect class="wall" x="719" y="710" width="62" height="120"></rect>

                <!-- Стены нижней части -->
                <rect class="wall" x="219" y="640" width="385" height="10"></rect>
                <rect class="wall" x="625" y="640" width="16" height="10"></rect>
                <rect class="wall" x="579" y="710" width="141" height="10"></rect>
                <rect class="wall" x="490" y="710" width="90" height="120"></rect>
                <rect class="wall" x="309" y="710" width="182" height="10"></rect>
                <rect class="wall" x="220" y="710" width="90" height="120"></rect>
                <rect class="wall" x="59" y="710" width="162" height="10"></rect>
                <rect class="wall" x="-30" y="710" width="90" height="120"></rect>
                <rect class="wall" x="0" y="649" width="30" height="62"></rect>

                <!-- Объекты 2-ого этажа -->
                <rect id="toilet-female-2" class="room" x="150" y="540" width="60" height="50"></rect>
                <text x="180" y="565" font-size="11">Туалет</text>

                <rect id="room-206" class="room" x="10" y="170" width="60" height="60"></rect>
                <text x="40" y="200" font-size="11">206</text>

                <rect id="room-205" class="room" x="10" y="240" width="60" height="100"></rect>
                <text x="40" y="290" font-size="11">205</text>

                <rect id="room-226" class="room" x="590" y="380" width="50" height="260"></rect>
                <text x="615" y="510" font-size="11">226</text>
            </g>

            <g id="floor-3" class="floor-layer" style="display: none;">
                <!-- Коридоры -->
                <rect class="corridor" x="0" y="0" width="220" height="830"></rect>
                <rect class="corridor" x="640" y="0" width="220" height="810"></rect>
                <rect class="corridor" x="219" y="0" width="422" height="190"></rect>
                <rect class="corridor" x="219" y="640" width="422" height="190"></rect>

                <!-- Двери -->
                <rect class="door" x="140" y="119" width="10" height="30"></rect>
                <rect class="door" x="140" y="151" width="10" height="29"></rect>

                <rect class="door" x="720" y="180" width="29" height="10"></rect>
                <rect class="door" x="751" y="180" width="29" height="10"></rect>

                <rect class="door" x="710" y="650" width="10" height="29"></rect>
                <rect class="door" x="710" y="681" width="10" height="30"></rect>

                <rect class="door" x="80" y="640" width="29" height="10"></rect>
                <rect class="door" x="111" y="640" width="29" height="10"></rect>

                <!-- Стены левой части (ЖТ) -->
                <rect class="wall" x="0" y="0" width="80" height="650"></rect>
                <rect class="wall" x="79" y="0" width="62" height="30"></rect>
                <rect class="wall" x="140" y="180" width="80" height="360"></rect>
                <rect class="wall" x="210" y="539" width="10" height="52"></rect>
                <rect class="wall" x="140" y="539" width="10" height="19"></rect>
                <rect class="wall" x="140" y="572" width="10" height="19"></rect>
                <rect class="wall" x="140" y="590" width="80" height="60"></rect>

                <!-- Стены верхней части (308, 311) -->
                <rect class="wall" x="140" y="0" width="300" height="120"></rect>
                <rect class="wall" x="440" y="0" width="20" height="10"></rect>
                <rect class="wall" x="460" y="0" width="330" height="120"></rect>
                <rect class="wall" x="790" y="0" width="20" height="10"></rect>
                <rect class="wall" x="810" y="0" width="50" height="120"></rect>
                <rect class="wall" x="219" y="180" width="422" height="10"></rect>
                <rect class="wall" x="830" y="119" width="30" height="62"></rect>

                <!-- Стены правой части (336, МТ) -->
                <rect class="wall" x="640" y="180" width="80" height="32"></rect>
                <rect class="wall" x="640" y="204" width="10" height="32"></rect>
                <rect class="wall" x="640" y="228" width="80" height="202"></rect>
                <rect class="wall" x="640" y="429" width="10" height="22"></rect>
                <rect class="wall" x="640" y="450" width="80" height="200"></rect>
                <rect class="wall" x="780" y="180" width="80" height="670"></rect>

                <!-- Стены нижней части (320) -->
                <rect class="wall" x="219" y="640" width="422" height="10"></rect>
                <rect class="wall" x="719" y="800" width="62" height="10"></rect>
                <rect class="wall" x="580" y="710" width="140" height="160"></rect>
                <rect class="wall" x="470" y="710" width="111" height="120"></rect>
                <rect class="wall" x="220" y="710" width="111" height="120"></rect>
                <rect class="wall" x="80" y="710" width="141" height="160"></rect>
                <rect class="wall" x="-40" y="710" width="121" height="120"></rect>
                <rect class="wall" x="0" y="649" width="30" height="62"></rect>
                <rect class="wall" x="330" y="710" width="90" height="160"></rect>
                <rect class="wall" x="419" y="860" width="17" height="10"></rect>
                <rect class="wall" x="435" y="710" width="36" height="160"></rect>

                <!-- Объекты 3-ого этажа -->
                <rect id="toilet-female-3" class="room" x="150" y="540" width="60" height="50"></rect>
                <text x="180" y="565" font-size="11">Туалет</text>

                <rect id="room-308" class="room" x="300" y="10" width="180" height="100"></rect>
                <text x="390" y="60" font-size="11">308</text>

                <rect id="room-311" class="room" x="680" y="10" width="140" height="100"></rect>
                <text x="750" y="60" font-size="11">311</text>

                <rect id="toilet-male-3" class="room" x="650" y="190" width="60" height="60"></rect>
                <text x="680" y="220" font-size="11">Туалет</text>

                <rect id="room-336" class="room" x="650" y="390" width="60" height="120"></rect>
                <text x="680" y="450" font-size="11">336</text>

                <rect id="room-320" class="room" x="340" y="720" width="120" height="140"></rect>
                <text x="400" y="790" font-size="11">320</text>
            </g>

            <g class="stairs">
                <rect id="secondary-stairs" class="room" x="150" y="180" width="60" height="60"></rect>
                <text x="180" y="210" font-size="11">Лестница</text>

                <rect id="main-stairs" class="room" x="730" y="590" width="60" height="60">Лестница</rect>
                <text x="760" y="620" font-size="11">Лестница</text>
            </g>
        </svg>
    </div>

    <div class="zoom-controls">
        <button id="zoomInBtn">+</button>
        <button id="zoomOutBtn">-</button>
    </div>

    <div class="card" style="display: none">
        <div class="slider">
            <div class="slider-content"></div>
        </div>
        <div class="card-header">
            <h2></h2>
            <button id="closeCardBtn" class="close-btn">×</button>
        </div>
        <div class="img-wrap">
            <img src="" alt="Картинка объекта">
        </div>
        <div class="description"></div>
    </div>

    <div id="qr-button">
        <svg fill="#000000" viewBox="0 0 24 24" id="qr-code-scan-2" data-name="Line Color"
             xmlns="http://www.w3.org/2000/svg" class="icon line-color">
            <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
            <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
            <g id="SVGRepo_iconCarrier">
                <path id="secondary" d="M11,11H7V7h4Zm6-4H15V9h2ZM13,17h4V13H13ZM7,17H9V15H7Z"
                      style="fill: none; stroke: #3b82f6; stroke-linecap: round; stroke-linejoin: round; stroke-width: 2;"></path>
                <path id="primary" d="M8,3H4A1,1,0,0,0,3,4V8"
                      style="fill: none; stroke: #000000; stroke-linecap: round; stroke-linejoin: round; stroke-width: 2;"></path>
                <path id="primary-2" data-name="primary" d="M21,8V4a1,1,0,0,0-1-1H16"
                      style="fill: none; stroke: #000000; stroke-linecap: round; stroke-linejoin: round; stroke-width: 2;"></path>
                <path id="primary-3" data-name="primary" d="M3,16v4a1,1,0,0,0,1,1H8"
                      style="fill: none; stroke: #000000; stroke-linecap: round; stroke-linejoin: round; stroke-width: 2;"></path>
                <path id="primary-4" data-name="primary" d="M16,21h4a1,1,0,0,0,1-1V16"
                      style="fill: none; stroke: #000000; stroke-linecap: round; stroke-linejoin: round; stroke-width: 2;"></path>
            </g>
        </svg>
    </div>

    <div class="scanner-container">
        <div class="container-wrapper">
            <button class="close-btn">×</button>
            <h3>Отсканируйте qr-код у объекта, чтобы найти его на карте.</h3>
            <div id="qr-reader"></div>
            <div id="qr-error"></div>
            <button id="camera-btn" class="deactivated">Сканировать</button>
        </div>
    </div>
</div>

<div class="object-picture" style="display: none">
    <button class="close-btn">×</button>
    <img src="" alt="object image">
</div>

<script src="/scripts/html5-qrcode.min.js" type="text/javascript"></script>
<script src="/scripts/main.js"></script>
<script>
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/service-worker.js');
    }
</script>
</body>
</html>
